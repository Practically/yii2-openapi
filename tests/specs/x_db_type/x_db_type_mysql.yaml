openapi: "3.0.0"
info:
  version: 1.0.0
  title: Column edit by x-db-type test
paths:
  /:
    get:
      summary: List
      operationId: list
      responses:
        '200':
          description: The information

components:
  schemas:
    Pristine:
      type: object
      description: New Fresh table with new columns for migration code generation
      required:
        - custom_id_col
        - name
      properties:
        custom_id_col:
          type: integer
          format: int64
          x-db-type: INTEGER PRIMARY KEY AUTO_INCREMENT
        name:
          type: integer
          x-db-type: text
        tag:
          type: string
          # default: 4 leg
        new_col:
          type: string
          x-db-type: string
        col_5:
          type: string
          x-db-type: decimal(12,4)
        col_6:
          type: string
          x-db-type: decimal(11)
        col_7:
          type: string
          x-db-type: decimal
        col_8:
          type: string
          x-db-type: json
        col_9:
          type: string
          x-db-type: varchar
        col_10:
          type: string
          x-db-type: VARCHAR
        col_11:
          type: string
          x-db-type: TEXT


    Alldbdatatype: # All DB data type
      type: object
      description: All DB data type
      required:
        - id
        - char_6_col
      properties:
        id:
          type: integer
          format: int64
        string_col:
          type: string
          x-db-type: string
        varchar_col:
          type: string
          x-db-type: varchar
        text_col:
          type: string
          x-db-type: text
        varchar_4_col:
          type: string
          x-db-type: VARCHAR(4) # (4) has no effect, use maxLength instead
        char_4_col:
          type: string
          x-db-type: CHAR(4) # (4) has no effect, use maxLength instead
        char_5_col:
          type: string
          x-db-type: CHAR
        char_6_col:
          type: string
          x-db-type: char
        char_7_col:
          type: string
          x-db-type: char
          maxLength: 6
          nullable: false
        char_8_col:
          type: string
          x-db-type: char
          default: d
        decimal_col:
          type: float
          x-db-type: decimal(12,3)

        # binary_col:
        #   type: string
        #   x-db-type: binary # binary is not in $typeMap list in \yii\db\mysql\Schema::class https://github.com/yiisoft/yii2/issues/19705

        varbinary_col:
          type: string
          x-db-type: varbinary
          # nullable: false
          maxLength: 5 # length is required in varbinary and binary
        blob:
          type: string
          x-db-type: blob
        # set:
        #   type: string
        #   x-db-type: SET('a', 'b', 'c', 'd') # set is not in $typeMap list in \yii\db\mysql\Schema::class https://github.com/yiisoft/yii2/issues/19705


    # Editcolumn:
    #   type: object
    #   description: Edit Column in existing table
    #   required:
    #     - id
    #   properties:
    #     id:
    #       type: integer
    #       format: int64
    #     string_col:
    #       type: string
    #       x-db-type: string
    #     varchar_col:
    #       type: string
    #       x-db-type: varchar
    #     text_col:
    #       type: string
    #       x-db-type: text
    #     varchar_4_col:
    #       type: string
    #       x-db-type: VARCHAR(4) # (4) has no effect, use maxLength instead
    #     char_4_col:
    #       type: string
    #       x-db-type: CHAR(4) # (4) has no effect, use maxLength instead
    #     char_5_col:
    #       type: string
    #       x-db-type: CHAR
    #     char_6_col:
    #       type: string
    #       x-db-type: char
    #     # int_col:
    #     #   type: integer
    #     #   x-db-type: INT NULL DEFAULT NULL AFTER `Low_price`
    #     decimal_col:
    #       type: float
    #       x-db-type: decimal(12,3)
    #     # decimal_col_2:
    #     #   type: float
    #     #   x-db-type: decimal(12)
    #     # decimal_col_3:
    #     #   type: float
    #     #   x-db-type: decimal
