openapi: "3.0.0"
info:
  version: 1.0.0
  title: Column edit by x-db-type test for PgSQL
paths:
  /:
    get:
      summary: List
      operationId: list
      responses:
        '200':
          description: The information

components:
  schemas:
    Pristine:
      type: object
      description: New Fresh table with new columns for migration code generation
      required:
        - custom_id_col
        - name
      properties:
        custom_id_col:
          type: integer
          format: int64
          x-db-type: SERIAL PRIMARY KEY
        name:
          type: integer
          x-db-type: text
        tag:
          type: string
          default: 4 leg
        new_col:
          type: string
          x-db-type: varchar
        col_5:
          type: string
          x-db-type: decimal(12,4)
        col_6:
          type: string
          x-db-type: decimal(11)
        col_7:
          type: string
          x-db-type: decimal
        col_8:
          type: string
          x-db-type: json
        col_9:
          type: string
          x-db-type: varchar
        col_10:
          type: string
          x-db-type: VARCHAR
        col_11:
          type: string
          x-db-type: TEXT


    Alldbdatatype: # All DB data type
      type: object
      description: All DB data type
      required:
        - id
        - char_6_col
      properties:
        id:
          type: integer
          format: int64
        string_col:
          type: string
          x-db-type: varchar
        varchar_col:
          type: string
          x-db-type: varchar
        text_col:
          type: string
          x-db-type: text
        varchar_4_col:
          type: string
          x-db-type: VARCHAR(4) # (4) has no effect, use maxLength instead
        char_4_col:
          type: string
          x-db-type: CHAR(4) # (4) has no effect, use maxLength instead
        char_5_col:
          type: string
          x-db-type: CHAR
        char_6_col:
          type: string
          x-db-type: char
        char_7_col:
          type: string
          x-db-type: char
          maxLength: 6
          nullable: false
        char_8_col:
          type: string
          x-db-type: char
          default: d
        decimal_col:
          type: float
          x-db-type: decimal(12,3)

        # binary_col:
        #   type: string
        #   x-db-type: binary # binary is not in $typeMap list in \yii\db\mysql\Schema::class https://github.com/yiisoft/yii2/issues/19705

        # bytea_col:
        #   type: string
        #   x-db-type: bytea
        #   # nullable: false
        #   maxLength: 5 # length is required in bytea and binary
        bytea_col_2:
          type: string
          x-db-type: bytea
        # set:
        #   type: string
        #   x-db-type: SET('a', 'b', 'c', 'd') # set is not in $typeMap list in \yii\db\mysql\Schema::class https://github.com/yiisoft/yii2/issues/19705
        bit:
          type: string
          x-db-type: bit
        bit_2:
          type: string
          x-db-type: bit(1)
        bit_3:
          type: string
          x-db-type: bit(64)

        ti:
          type: string
          x-db-type: smallint

        si_col:
          type: string
          x-db-type: smallint
        si_col_2:
          type: string
          x-db-type: SMALLINT # UNSIGNED ZEROFILL

        bi:
          type: string
          x-db-type: bigint
        int_col:
          type: string
          x-db-type: int
        int_col_2:
          type: string
          x-db-type: integer

        # dec:
        #   type: string
        #   x-db-type: dec # not supported

        # fixed:
        #   type: string
        #   x-db-type: fixed # not supported

        numeric:
          type: string
          x-db-type: numeric

        double_p_2:
          type: string
          x-db-type: DOUBLE PRECISION

        real:
          type: string
          x-db-type: real

        date:
          type: string
          x-db-type: date
        time:
          type: string
          x-db-type: time
        date2:
          type: string
          x-db-type: date
        timestamp:
          type: string
          x-db-type: timestamp

        bit_varying:
          type: string
          x-db-type: bit varying
        bit_varying_n:
          type: string
          x-db-type: bit varying(8)

        character:
          type: string
          x-db-type: character
        character_n:
          type: string
          x-db-type: character(12)
        character_varying:
          type: string
          x-db-type: character varying
        character_varying_n:
          type: string
          x-db-type: character varying(12)


        # geometry:
        #   type: string
        #   x-db-type: geometry
        # below are not implemented in Yii
        # GEOMETRY
        # point
        # LINESTRING
        # POLYGON
        # MULTIPOINT
        # MULTILINESTRING
        # MULTIPOLYGON
        # GEOMETRYCOLLECTION

        json:
          type: string
          x-db-type: json
        jsonb:
          type: string
          x-db-type: jsonb

        bytea_def:
          type: string
          x-db-type: bytea
          default: the bytea blob default
        text_def:
          type: string
          x-db-type: text
          default: the text
        json_def:
          type: string
          x-db-type: json
          default: '{"a":"b"}'


    Newcolumn:
      type: object
      description: New Fresh table with new columns for migration code generation
      required:
        - id
        - name
      properties:
        id:
          type: integer
        name:
          type: string
          x-db-type: varchar
          nullable: false
        first_name:
          type: string
          x-db-type: varchar
        last_name:
          type: string
        dec:
          type: string
          x-db-type: decimal(12,4)
        json:
          type: string
          x-db-type: json
        varchar:
          type: string
          x-db-type: varchar

    Editcolumn:
      type: object
      description: Table with edit columns for migration code generation
      required:
        - id
        - name
      properties:
        id:
          type: integer
        name:
          type: string
          x-db-type: varchar
          maxLength: 254
          nullable: false
          default: Horse-2
        tag:
          type: string
        first_name:
          type: string
          x-db-type: varchar
        string_col:
          type: string # text in DB
          nullable: true
        dec_col:
          type: string
          x-db-type: decimal(12,2)
          default: 3.14
        str_col_def:
          type: string
          x-db-type: varchar
          nullable: false
        json_col:
          type: string
          x-db-type: text
